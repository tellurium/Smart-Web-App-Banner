!function(e){e.fn.smartWebBanner=function(n){function a(){if(u||c){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]}return!1}function s(){e("body").append('<div id="smartWebBanner"><a href="#" id="swb-close">X</a><a href="#" id="swb-icon"></a><div id="swb-info"><strong>'+C.title+"</strong><span>"+C.author+'</span></div><a href="#" id="swb-save">Save</a></div><div id="swb-instructions">Tap <span class="icon"></span> and then <strong>Add to Home Screen.</strong><div class="arrow"></div></div>'),c&&e("#smartWebBanner,#swb-instructions").addClass("ipad"),c||u||e("#swb-instructions").html("<strong>It appears this isn't an iOS device.</strong> This is a preview of the iPhone popup design though."),C.showFree&&e("#smartWebBanner").addClass("free"),"auto"==C.theme.toLowerCase()&&e("#smartWebBanner,#swb-instructions").addClass(b?"ios7":"ios6"),"ios 7"==C.theme.toLowerCase()&&e("#smartWebBanner,#swb-instructions").addClass("ios7"),"ios 6"==C.theme.toLowerCase()&&e("#smartWebBanner,#swb-instructions").addClass("ios6"),"dark"==C.theme.toLowerCase()&&e("#smartWebBanner,#swb-instructions").addClass("dark"),C.useIcon&&(e('link[rel="apple-touch-icon-precomposed"]').length>0?iconURL=e('link[rel="apple-touch-icon-precomposed"]').attr("href"):e('link[rel="apple-touch-icon"]').length>0&&(iconURL=e('link[rel="apple-touch-icon"]').attr("href"),0!=C.iconGloss&&e("#swb-icon").addClass("gloss")),1==C.iconGloss&&e("#swb-icon").addClass("gloss"),""!=C.iconOverwrite&&(iconURL=C.iconOverwrite),e("#swb-icon").css("background-image","url("+iconURL+")")),C.useIcon&&iconURL||e("#smartWebBanner").addClass("no-icon"),f=e("#smartWebBanner").height()}function t(){e("#smartWebBanner").stop().animate({top:0},C.speedIn).addClass("shown"),e("html").animate({marginTop:w+f},C.speedIn),e("#swb-close").on("click",function(){return o(),!1}),e("#swb-save,#swb-icon").on("click",function(){return i(),!1})}function o(n){e("#smartWebBanner").stop().animate({top:-(f+f/3)},C.speedOut).removeClass("shown"),e("html").animate({marginTop:w},C.speedOut),r(),n||d("swb-closed","true",C.daysHidden)}function i(){d("swb-saved","true",C.daysReminder),C.url&&(window.location.href=C.url)}function r(){e("#swb-instructions").fadeOut(C.popupSpeedOut),C.titleSwap&&setTimeout(function(){document.title=v},12e3),C.url&&setTimeout(function(){history.replaceState(null,null,g)},12e3)}function d(e,n,a){var s=new Date;s.setDate(s.getDate()+a);var n=escape(n)+(null==a?"":"; expires="+s.toUTCString());document.cookie=e+"="+n+"; path=/;"}function p(e){var n,a,s,t=document.cookie.split(";");for(n=0;n<t.length;n++)if(a=t[n].substr(0,t[n].indexOf("=")),s=t[n].substr(t[n].indexOf("=")+1),a=a.replace(/^\s+|\s+$/g,""),a==e)return unescape(s)}var c=null!=navigator.userAgent.match(/iPad/i),u=null!=navigator.userAgent.match(/iPhone/i),l=/Safari/i.test(navigator.appVersion)&&!/CriOS/i.test(navigator.appVersion),m=navigator.standalone,h=a();if(h[0]<=6)var b=!1;else var b=!0;var f,w=parseFloat(e("html").css("margin-top")),v=document.title,g=window.location.href;if("string"==typeof n){if(f=e("#smartWebBanner").height(),"undefined"==typeof C)var C=e.fn.smartWebBanner.defaults;switch(n){case"show":return e("#smartWebBanner").hasClass("shown")||t(),!1;case"hide":return e("#smartWebBanner").hasClass("shown")&&(w-=f,o(!0)),!1}}else var C=e.extend({},e.fn.smartWebBanner.defaults,n);C.autoApp&&0==e('meta[name="apple-mobile-web-app-capable"]').length&&e("head").append('<meta name="apple-mobile-web-app-capable" content="yes" />'),(u||c)&&l||(C.debug||!m&&"undefined"==typeof p("swb-closed")&&"undefined"==typeof p("swb-saved"))&&(s(),t())},e.fn.smartWebBanner.defaults={title:"Web App",titleSwap:!0,url:"",author:"Save to Home Screen",speedIn:300,speedOut:400,useIcon:!0,iconOverwrite:"",iconGloss:"auto",showFree:!0,daysHidden:15,daysReminder:90,popupDuration:6e3,popupSpeedIn:200,popupSpeedOut:900,theme:"auto",autoApp:!1,debug:!1}}(jQuery);