!function(e){e.fn.smartWebBanner=function(n){function t(){if(c||u){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]}return!1}function a(){e("body").append('<div id="smartWebBanner"><a href="#" id="swb-close">X</a><a href="#" id="swb-icon"></a><div id="swb-info"><strong>'+S.title+"</strong><span>"+S.author+'</span></div><a href="#" id="swb-save">Save</a></div><div id="swb-instructions">Tap <span class="icon"></span> and then <strong>Add to Home Screen.</strong><div class="arrow"></div></div>'),u&&e("#smartWebBanner,#swb-instructions").addClass("ipad"),u||c||e("#swb-instructions").html("<strong>It appears this isn't an iOS device.</strong> This is a preview of the iPhone popup design though."),S.showFree&&e("#smartWebBanner").addClass("free"),"auto"==S.theme&&e("#smartWebBanner,#swb-instructions").addClass(b?"ios7":"ios6"),"iOS 7"==S.theme&&e("#smartWebBanner,#swb-instructions").addClass("ios7"),"iOS 6"==S.theme&&e("#smartWebBanner,#swb-instructions").addClass("ios6"),"dark"==S.theme&&e("#smartWebBanner,#swb-instructions").addClass("dark"),S.useIcon&&(e('link[rel="apple-touch-icon-precomposed"]').length>0?iconURL=e('link[rel="apple-touch-icon-precomposed"]').attr("href"):e('link[rel="apple-touch-icon"]').length>0&&(iconURL=e('link[rel="apple-touch-icon"]').attr("href"),0!=S.iconGloss&&e("#swb-icon").addClass("gloss")),1==S.iconGloss&&e("#swb-icon").addClass("gloss"),""!=S.iconOverwrite&&(iconURL=S.iconOverwrite),e("#swb-icon").css("background-image","url("+iconURL+")")),S.useIcon&&iconURL||e("#smartWebBanner").addClass("no-icon"),f=e("#smartWebBanner").height()}function s(){e("#smartWebBanner").stop().animate({top:0},S.speedIn).addClass("shown"),e("html").animate({marginTop:w+f},S.speedIn),e("#swb-close").on("click",function(){return i(),!1}),e("#swb-save,#swb-icon").on("click",function(){return o(),!1})}function i(){e("#smartWebBanner").stop().animate({top:-(f+f/3)},S.speedOut).removeClass("shown"),e("html").animate({marginTop:w},S.speedOut),r(),p("swb-closed","true",S.daysHidden)}function o(){e("#swb-instructions").fadeIn(S.popupSpeedIn),S.titleSwap&&(document.title=S.title),S.url&&history.replaceState(null,null,S.url),0!=S.popupDuration&&setTimeout(function(){r()},S.popupDuration),p("swb-saved","true",S.daysReminder)}function r(){e("#swb-instructions").fadeOut(S.popupSpeedOut),S.titleSwap&&setTimeout(function(){document.title=v},12e3),S.url&&setTimeout(function(){history.replaceState(null,null,g)},12e3)}function p(e,n,t){var a=new Date;a.setDate(a.getDate()+t);var n=escape(n)+(null==t?"":"; expires="+a.toUTCString());document.cookie=e+"="+n+"; path=/;"}function d(e){var n,t,a,s=document.cookie.split(";");for(n=0;n<s.length;n++)if(t=s[n].substr(0,s[n].indexOf("=")),a=s[n].substr(s[n].indexOf("=")+1),t=t.replace(/^\s+|\s+$/g,""),t==e)return unescape(a)}var u=null!=navigator.userAgent.match(/iPad/i),c=null!=navigator.userAgent.match(/iPhone/i),l=/Safari/i.test(navigator.appVersion)&&!/CriOS/i.test(navigator.appVersion),m=navigator.standalone,h=t();if(h[0]<=6)var b=!1;else var b=!0;var f,w=parseFloat(e("html").css("margin-top")),v=document.title,g=window.location.href;if("string"==typeof n){if(f=e("#smartWebBanner").height(),"undefined"==typeof S)var S=e.fn.smartWebBanner.defaults;switch(n){case"show":return e("#smartWebBanner").hasClass("shown")||s(),!1;case"hide":return e("#smartWebBanner").hasClass("shown")&&(w-=f,i()),!1}}else var S=e.extend({},e.fn.smartWebBanner.defaults,n);S.autoApp&&0==e('meta[name="apple-mobile-web-app-capable"]').length&&e("head").append('<meta name="apple-mobile-web-app-capable" content="yes" />'),(S.debug||(c||u)&&l&&!m&&"undefined"==typeof d("swb-closed")&&"undefined"==typeof d("swb-saved"))&&(a(),s())},e.fn.smartWebBanner.defaults={title:"Web App",titleSwap:!0,url:"",author:"Save to Home Screen",speedIn:300,speedOut:400,useIcon:!0,iconOverwrite:"",iconGloss:"auto",showFree:!0,daysHidden:15,daysReminder:90,popupDuration:6e3,popupSpeedIn:200,popupSpeedOut:900,theme:"auto",autoApp:!1,debug:!1}}(jQuery);